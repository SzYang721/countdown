(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14035,e=>{"use strict";function t(e){let t=new Date,l=new Date(e.targetDate);return"natural"===e.countType?a(t,l):function(e,t,l){if(!l)return a(e,t);let n=parseInt(l.start.split(":")[0]),s=parseInt(l.start.split(":")[1]),o=parseInt(l.end.split(":")[0]),i=parseInt(l.end.split(":")[1]),r=new Date(e),c=0;for(;r<t;){let u=r.getDay();if(l.excludeWeekends&&(0===u||6===u)){r.setDate(r.getDate()+1),r.setHours(0,0,0,0);continue}let d=60*r.getHours()+r.getMinutes(),m=60*o+i;if(d>=60*n+s&&d<m&&c++,r.setMinutes(r.getMinutes()+1),c>1e6)return a(e,t)}if(c<=0)return{days:0,hours:0,minutes:0,seconds:0,isExpired:!0};let u=Math.floor(c/480);return{days:u,hours:Math.floor(c%480/60),minutes:c%60,seconds:0,isExpired:!1}}(t,l,e.workingHours)}function a(e,t){let a=t.getTime()-e.getTime();if(a<=0)return{days:0,hours:0,minutes:0,seconds:0,isExpired:!0};let l=Math.floor(a/864e5),n=Math.floor(a%864e5/36e5);return{days:l,hours:n,minutes:Math.floor(a%36e5/6e4),seconds:Math.floor(a%6e4/1e3),isExpired:!1}}function l(){return[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time (US)"},{value:"America/Chicago",label:"Central Time (US)"},{value:"America/Denver",label:"Mountain Time (US)"},{value:"America/Los_Angeles",label:"Pacific Time (US)"},{value:"Europe/London",label:"London"},{value:"Europe/Paris",label:"Paris"},{value:"Europe/Berlin",label:"Berlin"},{value:"Asia/Tokyo",label:"Tokyo"},{value:"Asia/Shanghai",label:"Shanghai"},{value:"Asia/Hong_Kong",label:"Hong Kong"},{value:"Australia/Sydney",label:"Sydney"}]}function n(){return[{value:"Arial, sans-serif",label:"Arial"},{value:"Georgia, serif",label:"Georgia"},{value:"Times New Roman, serif",label:"Times New Roman"},{value:"Helvetica, sans-serif",label:"Helvetica"},{value:"Verdana, sans-serif",label:"Verdana"},{value:"Courier New, monospace",label:"Courier New"},{value:"Impact, sans-serif",label:"Impact"},{value:"Comic Sans MS, cursive",label:"Comic Sans MS"}]}e.s(["calculateTimeRemaining",()=>t,"getFontOptions",()=>n,"getTimezoneOptions",()=>l])},38613,e=>{"use strict";e.s(["CountdownClient",()=>s]);var t=e.i(48329),a=e.i(39720),l=e.i(54981),n=e.i(14035);function s(){var s;let r=(0,l.useParams)(),c=(0,l.useRouter)(),[u,d]=(0,a.useState)(null),[m,x]=(0,a.useState)(null),[b,g]=(0,a.useState)(!0),[h,p]=(0,a.useState)(null),[v,f]=(0,a.useState)(!1),[y,j]=(0,a.useState)(0),w=r.id,k=(0,a.useCallback)(async()=>{try{let{getCountdown:t}=await e.A(28085),a=await t(w);a?d(a):/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(w)?p("Countdown not found. It may have been deleted or the link is invalid."):p("Invalid countdown ID format.")}catch(e){console.error("Error fetching countdown:",e),p("Failed to load countdown. Please try again.")}finally{g(!1)}},[w]);(0,a.useEffect)(()=>{k()},[k]),(0,a.useEffect)(()=>{if(!u)return;let e=()=>{x((0,n.calculateTimeRemaining)(u))};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[u]),(0,a.useEffect)(()=>{if(!(null==u?void 0:u.backgroundImages)||u.backgroundImages.length<=1)return;let e=setInterval(()=>{j(e=>(e+1)%u.backgroundImages.length)},1e3*(u.imageInterval||5));return()=>clearInterval(e)},[null==u?void 0:u.backgroundImages,null==u?void 0:u.imageInterval]);let N=async()=>{if(confirm("Are you sure you want to delete this countdown?"))try{let{deleteCountdown:t}=await e.A(28085);await t(w),c.push("/")}catch(e){alert("Failed to delete countdown")}};if(b)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-xl",children:"Loading countdown..."})});if(h||!u)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Error"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:h||"Countdown not found"}),(0,t.jsx)("button",{onClick:()=>c.push("/"),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Create New Countdown"})]})});let C={backgroundColor:u.customization.backgroundColor,color:u.customization.textColor,fontFamily:u.customization.fontFamily,fontSize:u.customization.fontSize},T=u.backgroundImages&&u.backgroundImages.length>0?{backgroundImage:"url(".concat(null==(s=u.backgroundImages[y])?void 0:s.data,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{},S={color:u.customization.titleColor,fontFamily:u.customization.fontFamily};return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",style:{...C,...T},children:[(0,t.jsxs)("div",{className:"bg-gray-100 border-b p-4 flex justify-between items-center text-black",children:[(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>c.push("/"),className:"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700",children:"New Countdown"}),(0,t.jsx)("button",{onClick:()=>f(!v),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:v?"Cancel Edit":"Edit"}),(0,t.jsx)("button",{onClick:N,className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"Delete"}),(0,t.jsx)("button",{onClick:()=>{let e=window.location.href;navigator.clipboard.writeText(e).then(()=>{alert("Share URL copied to clipboard!")})},className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:"Share URL"})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-800",children:["ID: ",u.id]})]}),v&&(0,t.jsx)(i,{countdown:u,onUpdate:()=>{k(),f(!1)},onCancel:()=>f(!1)}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:[(0,t.jsx)("h1",{className:"text-4xl md:text-6xl font-bold mb-8 text-center",style:S,children:u.title}),u.location&&(0,t.jsxs)("p",{className:"text-xl mb-8 opacity-80 text-center",children:["ðŸ“ ",u.location]}),m&&(0,t.jsx)("div",{className:"text-center",children:m.isExpired?(0,t.jsx)("div",{className:"text-6xl md:text-8xl font-bold mb-4 animate-pulse",children:"ðŸŽ‰ TIME'S UP! ðŸŽ‰"}):(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 md:gap-8 text-center",children:[(0,t.jsx)(o,{value:m.days,label:"Days"}),(0,t.jsx)(o,{value:m.hours,label:"Hours"}),(0,t.jsx)(o,{value:m.minutes,label:"Minutes"}),(0,t.jsx)(o,{value:m.seconds,label:"Seconds"})]})}),(0,t.jsxs)("div",{className:"mt-8 text-sm opacity-80 text-center",children:[(0,t.jsxs)("p",{children:["Countdown Type: ","natural"===u.countType?"Natural Time (24/7)":"Working Hours Only"]}),(0,t.jsxs)("p",{children:["Timezone: ",u.timezone]}),u.workingHours&&(0,t.jsxs)("p",{children:["Working Hours: ",u.workingHours.start," - ",u.workingHours.end]})]})]})]})}function o(e){let{value:a,label:l}=e;return(0,t.jsxs)("div",{className:"bg-black rounded-lg p-4 md:p-6",children:[(0,t.jsx)("div",{className:"text-3xl md:text-5xl font-bold mb-2 text-white",children:a.toString().padStart(2,"0")}),(0,t.jsx)("div",{className:"text-sm md:text-base text-gray-300",children:l})]})}function i(l){let{countdown:n,onUpdate:s,onCancel:o}=l,[i,r]=(0,a.useState)({title:n.title,targetDate:n.targetDate.slice(0,16),timezone:n.timezone,location:n.location,countType:n.countType,workingHours:n.workingHours||{start:"09:00",end:"17:00",excludeWeekends:!0},customization:n.customization}),c=async t=>{t.preventDefault();try{let{updateCountdown:t}=await e.A(28085);await t(n.id,{...i,workingHours:"working"===i.countType?i.workingHours:void 0}),s()}catch(e){alert("Failed to update countdown")}};return(0,t.jsxs)("div",{className:"bg-white border-b p-6 text-black",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Countdown"}),(0,t.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Event Title"}),(0,t.jsx)("input",{type:"text",value:i.title,onChange:e=>r(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border rounded-md text-black"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Target Date"}),(0,t.jsx)("input",{type:"datetime-local",value:i.targetDate,onChange:e=>r(t=>({...t,targetDate:e.target.value})),className:"w-full px-3 py-2 border rounded-md text-black"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Background"}),(0,t.jsx)("input",{type:"color",value:i.customization.backgroundColor,onChange:e=>r(t=>({...t,customization:{...t.customization,backgroundColor:e.target.value}})),className:"w-full h-10 border rounded-md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Text Color"}),(0,t.jsx)("input",{type:"color",value:i.customization.textColor,onChange:e=>r(t=>({...t,customization:{...t.customization,textColor:e.target.value}})),className:"w-full h-10 border rounded-md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Title Color"}),(0,t.jsx)("input",{type:"color",value:i.customization.titleColor,onChange:e=>r(t=>({...t,customization:{...t.customization,titleColor:e.target.value}})),className:"w-full h-10 border rounded-md"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Update"}),(0,t.jsx)("button",{type:"button",onClick:o,className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"})]})]})]})}},28085,e=>{e.v(t=>Promise.all(["static/chunks/0726c2f8a2f4188a.js"].map(t=>e.l(t))).then(()=>t(49264)))}]);